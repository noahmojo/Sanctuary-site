<%- include('../partials/header', { settings, title: 'Animals' }) %>

<section class="py-16">
  <div class="max-w-6xl mx-auto px-6">
    <div class="text-center mb-12">
      <h1 class="text-4xl font-light mb-3">Our Animals</h1>
      <p class="text-neutral-500"><%= animals.length %> residents call the sanctuary home</p>
    </div>
    
    <div class="flex justify-center gap-4 mb-12">
      <form method="GET" class="flex gap-3">
        <select name="species" onchange="this.form.submit()" class="bg-neutral-50 border-0 rounded-full px-5 py-2.5 text-sm">
          <option value="">All Species</option>
          <% speciesList.forEach(s => { %>
            <option value="<%= s %>" <%= currentSpecies === s ? 'selected' : '' %>><%= s %>s</option>
          <% }); %>
        </select>
        <select name="sort" onchange="this.form.submit()" class="bg-neutral-50 border-0 rounded-full px-5 py-2.5 text-sm">
          <option value="">Sort</option>
          <option value="name" <%= currentSort === 'name' ? 'selected' : '' %>>Name</option>
          <option value="age" <%= currentSort === 'age' ? 'selected' : '' %>>Age</option>
        </select>
        <% if (currentSpecies || currentSort) { %>
          <a href="/animals" class="text-neutral-400 hover:text-neutral-600 text-sm flex items-center">Clear</a>
        <% } %>
      </form>
    </div>
    
    <div class="grid md:grid-cols-3 lg:grid-cols-4 gap-5">
      <% animals.forEach(animal => { %>
        <div class="group hover-lift bg-white rounded-2xl overflow-hidden border border-neutral-100">
          <div class="aspect-square bg-neutral-100 overflow-hidden">
            <% if (animal.photos && animal.photos.length > 0) { %>
              <img src="<%= animal.photos[0] %>" alt="<%= animal.name %>" class="w-full h-full object-cover">
            <% } else { %>
              <div class="w-full h-full flex items-center justify-center text-5xl bg-gradient-to-br from-amber-50 to-emerald-50"><%= animal.species === 'Alpaca' ? 'ðŸ¦™' : 'ðŸ‘' %></div>
            <% } %>
          </div>
          <div class="p-4">
            <h3 class="font-medium mb-1"><%= animal.name %></h3>
            <p class="text-neutral-400 text-xs mb-3"><%= animal.breed %> Â· <%= calcAge(animal.birthday) %></p>
            <div class="flex gap-2">
              <a href="/animal/<%= animal.id %>" class="flex-1 text-center text-xs py-2 text-neutral-600 hover:bg-neutral-50 rounded-lg transition">Profile</a>
              <a href="/chat/<%= animal.id %>" class="flex-1 text-center text-xs py-2 bg-emerald-50 text-emerald-700 rounded-lg hover:bg-emerald-100 transition">Chat</a>
            </div>
          </div>
        </div>
      <% }); %>
    </div>
  </div>
</section>

<%- include('../partials/footer', { settings }) %>
