<%- include('../partials/header', { settings, title: 'Book a Visit' }) %>

<section class="py-16">
  <div class="max-w-3xl mx-auto px-6">
    <div class="text-center mb-12">
      <h1 class="text-4xl font-light mb-3">Book a Visit</h1>
      <p class="text-neutral-500">Select the type of visit you're interested in</p>
    </div>
    
    <% if (success) { %>
      <div class="bg-emerald-50 border border-emerald-100 rounded-2xl p-6 mb-8 text-center">
        <p class="text-emerald-700 font-medium mb-2">âœ“ Request Submitted!</p>
        <p class="text-emerald-600 text-sm">We'll be in touch within 24-48 hours to confirm details.</p>
      </div>
    <% } %>
    
    <!-- Visit Type Tiles -->
    <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-8">
      <button type="button" onclick="selectType('school')" data-type="school" class="tile-btn group p-6 rounded-2xl border-2 border-neutral-100 hover:border-neutral-900 transition-all text-center">
        <div class="text-3xl mb-3">ğŸ«</div>
        <p class="font-medium text-sm">School</p>
        <p class="text-xs text-neutral-400">Educational visits</p>
      </button>
      
      <button type="button" onclick="selectType('nursing')" data-type="nursing" class="tile-btn group p-6 rounded-2xl border-2 border-neutral-100 hover:border-neutral-900 transition-all text-center">
        <div class="text-3xl mb-3">ğŸ¥</div>
        <p class="font-medium text-sm">Nursing Home</p>
        <p class="text-xs text-neutral-400">Assisted living</p>
      </button>
      
      <button type="button" onclick="selectType('hospital')" data-type="hospital" class="tile-btn group p-6 rounded-2xl border-2 border-neutral-100 hover:border-neutral-900 transition-all text-center">
        <div class="text-3xl mb-3">âš•ï¸</div>
        <p class="font-medium text-sm">Hospital</p>
        <p class="text-xs text-neutral-400">Medical facility</p>
      </button>
      
      <button type="button" onclick="selectType('event')" data-type="event" class="tile-btn group p-6 rounded-2xl border-2 border-neutral-100 hover:border-neutral-900 transition-all text-center">
        <div class="text-3xl mb-3">ğŸ‰</div>
        <p class="font-medium text-sm">Private Event</p>
        <p class="text-xs text-neutral-400">Parties & celebrations</p>
      </button>
      
      <button type="button" onclick="selectType('corporate')" data-type="corporate" class="tile-btn group p-6 rounded-2xl border-2 border-neutral-100 hover:border-neutral-900 transition-all text-center">
        <div class="text-3xl mb-3">ğŸ¢</div>
        <p class="font-medium text-sm">Corporate</p>
        <p class="text-xs text-neutral-400">Team building</p>
      </button>
      
      <button type="button" onclick="selectType('other')" data-type="other" class="tile-btn group p-6 rounded-2xl border-2 border-neutral-100 hover:border-neutral-900 transition-all text-center">
        <div class="text-3xl mb-3">âœ¨</div>
        <p class="font-medium text-sm">Other</p>
        <p class="text-xs text-neutral-400">Something else</p>
      </button>
    </div>
    
    <!-- Contact Form (hidden until tile selected) -->
    <form id="booking-form" method="POST" action="/book" class="hidden opacity-0 transition-all duration-500 space-y-6">
      <input type="hidden" name="type" id="selected-type" value="">
      
      <div class="bg-neutral-50 rounded-2xl p-6 mb-2">
        <p class="text-sm text-neutral-500">Selected: <span id="selected-label" class="font-medium text-neutral-900"></span></p>
      </div>
      
      <div>
        <label class="block text-sm font-medium mb-2">Organization Name</label>
        <input type="text" name="organization" required class="w-full bg-neutral-50 border-0 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-emerald-500/20" placeholder="School, facility, or company name">
      </div>
      
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium mb-2">Contact Name</label>
          <input type="text" name="contact" required class="w-full bg-neutral-50 border-0 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-emerald-500/20">
        </div>
        <div>
          <label class="block text-sm font-medium mb-2">Phone</label>
          <input type="tel" name="phone" class="w-full bg-neutral-50 border-0 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-emerald-500/20">
        </div>
      </div>
      
      <div>
        <label class="block text-sm font-medium mb-2">Email</label>
        <input type="email" name="email" required class="w-full bg-neutral-50 border-0 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-emerald-500/20">
      </div>
      
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium mb-2">Preferred Date</label>
          <input type="date" name="date" required class="w-full bg-neutral-50 border-0 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-emerald-500/20">
        </div>
        <div>
          <label class="block text-sm font-medium mb-2">Expected Attendees</label>
          <input type="number" name="attendees" min="1" class="w-full bg-neutral-50 border-0 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-emerald-500/20" placeholder="Approx number">
        </div>
      </div>
      
      <div>
        <label class="block text-sm font-medium mb-2">Additional Information</label>
        <textarea name="message" rows="4" class="w-full bg-neutral-50 border-0 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-emerald-500/20 resize-none" placeholder="Tell us about your event, any special requests, or questions..."></textarea>
      </div>
      
      <button type="submit" class="w-full bg-neutral-900 text-white py-4 rounded-full text-sm font-medium hover:bg-neutral-800 transition">Submit Request</button>
    </form>
    
    <p class="text-center text-neutral-400 text-xs mt-6">We typically respond within 24-48 hours</p>
  </div>
</section>

<script>
const labels = {
  school: 'School / Educational',
  nursing: 'Nursing Home / Assisted Living',
  hospital: 'Hospital / Medical Facility',
  event: 'Private Event / Party',
  corporate: 'Corporate Event',
  other: 'Other'
};

function selectType(type) {
  // Update hidden input
  document.getElementById('selected-type').value = type;
  document.getElementById('selected-label').textContent = labels[type];
  
  // Update tile styles
  document.querySelectorAll('.tile-btn').forEach(btn => {
    btn.classList.remove('border-neutral-900', 'bg-neutral-50');
    btn.classList.add('border-neutral-100');
  });
  const selected = document.querySelector(`[data-type="${type}"]`);
  selected.classList.remove('border-neutral-100');
  selected.classList.add('border-neutral-900', 'bg-neutral-50');
  
  // Show form with animation
  const form = document.getElementById('booking-form');
  form.classList.remove('hidden');
  setTimeout(() => {
    form.classList.remove('opacity-0');
    form.classList.add('opacity-100');
  }, 10);
  
  // Scroll to form
  setTimeout(() => {
    form.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }, 100);
}
</script>

<%- include('../partials/footer', { settings }) %>
