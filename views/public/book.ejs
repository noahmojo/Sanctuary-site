<%- include('../partials/header', { settings, title: 'Book a Visit' }) %>

<section class="py-16">
  <div class="max-w-4xl mx-auto px-6">
    <div class="text-center mb-10">
      <h1 class="text-4xl font-light mb-4">Book a Visit</h1>
      <p class="text-neutral-500 leading-relaxed max-w-xl mx-auto">We bring our alpacas and sheep to schools, nursing homes, and events throughout El Dorado County. We schedule 1-2 visits each month.</p>
    </div>
    
    <% if (success) { %>
      <div class="bg-emerald-50 text-emerald-700 px-6 py-4 rounded-xl mb-8 text-center">
        Thank you! We'll be in touch within 24-48 hours.
      </div>
    <% } %>
    
    <div id="visit-types" class="grid md:grid-cols-3 gap-4 mb-8">
      <button type="button" class="visit-tile group border-2 border-neutral-100 rounded-xl p-6 text-center hover:border-neutral-300 transition" data-type="School">
        <p class="text-3xl mb-3">ğŸ«</p>
        <p class="font-medium">School</p>
        <p class="text-sm text-neutral-400">Educational visits</p>
      </button>
      <button type="button" class="visit-tile group border-2 border-neutral-100 rounded-xl p-6 text-center hover:border-neutral-300 transition" data-type="Nursing Home">
        <p class="text-3xl mb-3">ğŸ¥</p>
        <p class="font-medium">Nursing Home</p>
        <p class="text-sm text-neutral-400">Assisted living</p>
      </button>
      <button type="button" class="visit-tile group border-2 border-neutral-100 rounded-xl p-6 text-center hover:border-neutral-300 transition" data-type="Hospital">
        <p class="text-3xl mb-3">âš•ï¸</p>
        <p class="font-medium">Hospital</p>
        <p class="text-sm text-neutral-400">Medical facility</p>
      </button>
      <button type="button" class="visit-tile group border-2 border-neutral-100 rounded-xl p-6 text-center hover:border-neutral-300 transition" data-type="Private Event">
        <p class="text-3xl mb-3">ğŸ‰</p>
        <p class="font-medium">Private Event</p>
        <p class="text-sm text-neutral-400">Parties & celebrations</p>
      </button>
      <button type="button" class="visit-tile group border-2 border-neutral-100 rounded-xl p-6 text-center hover:border-neutral-300 transition" data-type="Corporate">
        <p class="text-3xl mb-3">ğŸ¢</p>
        <p class="font-medium">Corporate</p>
        <p class="text-sm text-neutral-400">Team building</p>
      </button>
      <button type="button" class="visit-tile group border-2 border-neutral-100 rounded-xl p-6 text-center hover:border-neutral-300 transition" data-type="Other">
        <p class="text-3xl mb-3">âœ¨</p>
        <p class="font-medium">Other</p>
        <p class="text-sm text-neutral-400">Something else</p>
      </button>
    </div>
    
    <form id="booking-form" method="POST" action="/book" class="hidden bg-white rounded-2xl border border-neutral-100 p-8 space-y-5">
      <input type="hidden" name="type" id="visit-type">
      
      <div id="selected-type" class="text-center pb-5 border-b border-neutral-100">
        <span class="inline-block bg-emerald-50 text-emerald-700 px-4 py-1.5 rounded-full text-sm font-medium"></span>
      </div>
      
      <div class="grid md:grid-cols-2 gap-5">
        <div>
          <label class="block text-sm font-medium mb-1.5">Organization Name *</label>
          <input type="text" name="organization" required class="w-full bg-neutral-50 border-0 rounded-lg px-4 py-2.5 text-sm">
        </div>
        <div>
          <label class="block text-sm font-medium mb-1.5">Contact Person *</label>
          <input type="text" name="contact" required class="w-full bg-neutral-50 border-0 rounded-lg px-4 py-2.5 text-sm">
        </div>
      </div>
      
      <div class="grid md:grid-cols-2 gap-5">
        <div>
          <label class="block text-sm font-medium mb-1.5">Email *</label>
          <input type="email" name="email" required class="w-full bg-neutral-50 border-0 rounded-lg px-4 py-2.5 text-sm">
        </div>
        <div>
          <label class="block text-sm font-medium mb-1.5">Phone</label>
          <input type="tel" name="phone" class="w-full bg-neutral-50 border-0 rounded-lg px-4 py-2.5 text-sm">
        </div>
      </div>
      
      <div class="grid md:grid-cols-2 gap-5">
        <div>
          <label class="block text-sm font-medium mb-1.5">Preferred Date</label>
          <input type="date" name="date" class="w-full bg-neutral-50 border-0 rounded-lg px-4 py-2.5 text-sm">
        </div>
        <div>
          <label class="block text-sm font-medium mb-1.5">Expected Attendees</label>
          <input type="text" name="attendees" placeholder="e.g., 20-30" class="w-full bg-neutral-50 border-0 rounded-lg px-4 py-2.5 text-sm">
        </div>
      </div>
      
      <div>
        <label class="block text-sm font-medium mb-1.5">Tell us about your event</label>
        <textarea name="message" rows="3" class="w-full bg-neutral-50 border-0 rounded-lg px-4 py-2.5 text-sm resize-none" placeholder="Venue, audience, special requests..."></textarea>
      </div>
      
      <div class="pt-4">
        <button type="submit" class="w-full bg-emerald-600 text-white py-3 rounded-lg text-sm font-medium hover:bg-emerald-700 transition">Submit Request</button>
      </div>
    </form>
    
    <p class="text-center text-neutral-400 text-sm mt-8">We typically respond within 24-48 hours</p>
  </div>
</section>

<script>
document.querySelectorAll('.visit-tile').forEach(tile => {
  tile.addEventListener('click', function() {
    const type = this.dataset.type;
    document.getElementById('visit-type').value = type;
    document.querySelector('#selected-type span').textContent = type;
    
    document.querySelectorAll('.visit-tile').forEach(t => {
      t.classList.remove('border-neutral-900', 'bg-neutral-50');
      t.classList.add('border-neutral-100');
    });
    this.classList.remove('border-neutral-100');
    this.classList.add('border-neutral-900', 'bg-neutral-50');
    
    const form = document.getElementById('booking-form');
    form.classList.remove('hidden');
    setTimeout(() => form.scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);
  });
});
</script>

<%- include('../partials/footer', { settings }) %>
